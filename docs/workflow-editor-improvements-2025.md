# 워크플로우 편집기 개선 사항

## 개요
워크플로우 편집기의 사용성 개선을 위해 두 가지 주요 기능을 추가/개선했습니다.

## 수정 사항

### 1. 워크플로우 편집기 내 노드 생성 기능 추가

**문제점**: 
- 워크플로우 편집기에서 노드를 생성할 수 없어 모든 노드를 다른 화면에서 생성해야 하는 불편함
- 편집기에서 데이터소스, 프롬프트 노드 등을 직접 생성할 수 없음

**해결 방법**:
- 워크플로우 캔버스에서 우클릭 시 노드 생성 다이얼로그 표시
- 노드 팔레트를 재사용하여 노드 타입 선택 가능
- 선택한 위치에 노드 자동 배치

**수정 파일**:
- `client/src/pages/workflow-editor.tsx`
  - `handleCreateNode` 함수 추가: 노드 생성 로직 통합
  - `showCreateNodeDialog`, `createNodePosition` 상태 추가
  - 노드 생성 다이얼로그 추가
- `client/src/components/workflow/workflow-canvas.tsx`
  - `onCanvasRightClick` prop 추가
  - `onPaneContextMenu` 핸들러 추가: 우클릭 이벤트 처리
- `client/src/components/workflow/node-palette.tsx`
  - 다이얼로그 내에서 사용 가능하도록 스타일 조정
  - `isInDialog` 체크 로직 추가

**사용 방법**:
1. 워크플로우 캔버스의 빈 공간에서 우클릭
2. 노드 생성 다이얼로그가 표시됨
3. 원하는 노드 타입 선택
4. 선택한 위치에 노드가 자동으로 추가됨

**기대 효과**:
- 워크플로우 편집 중 다른 화면으로 이동할 필요 없음
- 노드 생성 워크플로우 단순화
- 사용자 경험 개선

---

### 2. 워크플로우 속성 패널을 큰 모달 팝업으로 변경

**문제점**:
- 속성 패널이 너무 작아서 속성을 탐색하고 편집하기 불편함
- 작은 텍스트창으로 인한 가독성 저하

**해결 방법**:
- 사이드바 형태의 속성 패널을 큰 모달 팝업으로 변경
- Dialog 컴포넌트를 사용하여 전체 화면에 가까운 크기로 표시
- 텍스트 입력 필드 크기 증가 (rows, font-size 조정)

**수정 파일**:
- `client/src/pages/workflow-editor.tsx`
  - PropertiesPanel을 Dialog로 감싸기
  - 모달 크기: `max-w-4xl max-h-[90vh]`
- `client/src/components/workflow/properties-panel.tsx`
  - Card 컴포넌트 제거, div로 변경
  - 텍스트 입력 필드 크기 증가:
    - 시스템 프롬프트: rows 4 → 6, text-sm → text-base
    - 사용자 프롬프트: rows 6 → 8, text-sm → text-base
    - SQL 쿼리: rows 10 → 12, text-xs → text-sm
    - Python 스크립트: rows 15 → 18, text-xs → text-sm

**사용 방법**:
1. 노드를 선택하면 속성 패널이 모달로 표시됨
2. 큰 화면에서 속성을 편집할 수 있음
3. 닫기 버튼 또는 모달 외부 클릭으로 닫기

**기대 효과**:
- 속성 편집 시 전체 워크플로우를 동시에 볼 필요 없음
- 더 큰 텍스트창으로 가독성 향상
- 속성 탐색 및 편집 편의성 개선

---

## 기술적 세부 사항

### 노드 생성 로직
- 기존 `handleNodeDoubleClick` 로직을 `handleCreateNode`로 통합
- 위치 기반 노드 배치 지원
- 노드 검증 로직 유지 (순환 참조, 스키마 검증 등)

### 속성 패널 모달화
- Dialog 컴포넌트 사용 (shadcn/ui)
- 반응형 크기 조정
- 스크롤 가능한 콘텐츠 영역

### 스키마 변경
- 데이터베이스 스키마 변경 없음
- API 엔드포인트 변경 없음
- 프론트엔드 컴포넌트 구조만 변경

---

## 테스트 체크리스트

### 노드 생성 기능
- [ ] 워크플로우 캔버스 우클릭 시 노드 생성 다이얼로그 표시
- [ ] 노드 타입 선택 시 해당 위치에 노드 추가
- [ ] 노드 검증 로직 정상 작동
- [ ] 순환 참조 방지 기능 정상 작동

### 속성 패널 모달
- [ ] 노드 선택 시 모달로 속성 패널 표시
- [ ] 텍스트 입력 필드 크기 증가 확인
- [ ] 모달 닫기 기능 정상 작동
- [ ] 스크롤 기능 정상 작동

---

## 배포 정보

### 마이그레이션
- 데이터베이스 마이그레이션 불필요
- 기존 워크플로우 데이터와 호환

### 배포 순서
1. 프론트엔드 빌드 및 배포
2. 기능 테스트
3. 사용자 안내

---

## 향후 개선 사항
- 노드 생성 시 바로 속성 편집 모달 열기 옵션
- 속성 패널에서 노드 삭제 기능 추가
- 키보드 단축키 지원 (예: Delete 키로 노드 삭제)

